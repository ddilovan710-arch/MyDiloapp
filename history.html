<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>๐ ุงูุณุฌู</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<!-- ุดุฑูุท ุงูุชููู -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="index.html">๐ฆ ุงูููุชุฌุงุช</a>
    <div>
      <a class="btn btn-outline-light" href="sales.html">๐ ุงูุจูุน</a>
      <a class="btn btn-outline-light" href="profit.html">๐ฐ ุงูุฑุจุญ</a>
      <a class="btn btn-outline-light" href="history.html">๐ ุงูุณุฌู</a>
    </div>
  </div>
</nav>

<!-- ุฌุฏูู ุงูุณุฌู -->
<div class="container mt-4">
  <h2 class="text-center mb-4">๐ ุณุฌู ุงูุนูููุงุช</h2>
  <table class="table table-bordered text-center">
    <thead class="table-dark">
      <tr>
        <th>๐ ุงูุชุงุฑูุฎ</th>
        <th>โก ุงูุนูููุฉ</th>
        <th>๐ ุงูุชูุงุตูู</th>
      </tr>
    </thead>
    <tbody id="historyTable"></tbody>
  </table>
</div>

<!-- ุฌุงูุงุณูุฑุจุช -->
<script>
const API = "https://script.google.com/macros/s/AKfycbx3rQd6R70Q1WHv2ynDoBSSHCSo4N7WvnTCSM5iTf0q3lzCl-ewPIOfsHNCKrPLCvHA/exec";

// ุฌูุจ ุงูุจูุงูุงุช ูู Google Sheets ุนุจุฑ Google Apps Script
fetch(API+"?action=getHistory")
  .then(response => response.json())
  .then(rows => {
    let t = "";
    rows.forEach(h => {
      t += `
        <tr>
          <td>${h.date}</td>
          <td>${h.type}</td>
          <td>${h.details}</td>
        </tr>`;
    });
    document.getElementById("historyTable").innerHTML = t;
  })
  .catch(err => {
    console.error("ุฎุทุฃ ูู ุฌูุจ ุงูุจูุงูุงุช:", err);
    document.getElementById("historyTable").innerHTML = 
      "<tr><td colspan='3'>โ๏ธ ูุดู ุชุญููู ุงูุณุฌู</td></tr>";
  });
</script>

</body>
</html>
